# =============================================================================
# DocBases v2.0 Dependencies - Phases 1-5
# =============================================================================

# -----------------------------------------------------------------------------
# Core Framework - UPGRADED
# -----------------------------------------------------------------------------
langchain>=1.0.0,<2.0.0
langchain-core>=1.0.0,<2.0.0
langchain-community>=0.3.15
langchain-text-splitters>=1.0.0,<2.0.0
langgraph>=1.0.0,<2.0.0
langgraph-checkpoint-sqlite>=3.0.0

# -----------------------------------------------------------------------------
# Vector Store - UPGRADED
# -----------------------------------------------------------------------------
chromadb>=1.0.0,<2.0.0
langchain-chroma>=1.0.0,<2.0.0

# -----------------------------------------------------------------------------
# LLM Providers - UPDATED FOR COMPATIBILITY
# -----------------------------------------------------------------------------
langchain-openai>=0.3.0
langchain-google-genai>=2.0.0
langchain-groq>=0.2.0
langchain-ollama>=0.2.0

# -----------------------------------------------------------------------------
# Existing Utilities - KEEP
# CLI Framework & Configuration
# NOTE: Rich is specified separately below for consistency
typer>=0.9.0                # Modern CLI framework
pyyaml>=6.0                       # YAML configuration support
rich>=13.9.4
python-dotenv>=1.0.1
tqdm>=4.67.0
python-magic>=0.4.27
beautifulsoup4>=4.12.0
requests>=2.32.4
pydantic>=2.0.0

# -----------------------------------------------------------------------------
# Security Patches - Transitive dependencies with minimum safe versions
# Critical & High priority vulnerabilities have been patched
# Reference: https://github.com/luongnv89/doc-bases/security/dependabot
# -----------------------------------------------------------------------------
h11>=0.16.0                 # CRITICAL (CVE-2025-43859): fixes malformed Chunked-Encoding bodies
cryptography>=44.0.1        # LOW (CVE-2024-12797): fixes vulnerable OpenSSL in wheels
protobuf>=5.29.5            # HIGH (CVE-2025-4565): fixes potential DoS issue
urllib3>=2.5.0              # MEDIUM (CVE-2025-50181, CVE-2025-50182): fixes redirect handling
aiohttp>=3.12.14            # LOW (CVE-2025-53643): fixes HTTP handling
starlette>=0.47.2           # MEDIUM (CVE-2025-54121): fixes DoS in multipart form parsing
requests>=2.32.4            # MEDIUM (CVE-2024-47081): fixes security issues

# -----------------------------------------------------------------------------
# Document Loaders
# -----------------------------------------------------------------------------
unstructured>=0.16.0
pypdf>=5.1.0
python-docx>=1.1.2
openpyxl>=3.1.5
python-pptx>=1.0.2

# -----------------------------------------------------------------------------
# Observability (Phase 5)
# -----------------------------------------------------------------------------
langsmith>=0.3.0

# -----------------------------------------------------------------------------
# Hybrid Search & Reranking (Phase 6)
# -----------------------------------------------------------------------------
rank-bm25>=0.2.2                # BM25 keyword search for hybrid retrieval
sentence-transformers>=2.2.0    # Cross-encoder reranking (optional, for local reranking)
# cohere>=5.0.0                 # Cohere Rerank API (optional, uncomment if needed)

# -----------------------------------------------------------------------------
# Development Dependencies
# -----------------------------------------------------------------------------
pytest>=7.0.0
pytest-asyncio>=0.23.0
black>=24.0.0
ruff>=0.1.0
mypy>=1.0.0
pytest-cov>=4.0.0
